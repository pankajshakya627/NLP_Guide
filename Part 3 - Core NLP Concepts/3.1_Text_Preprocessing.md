# Text Preprocessing

Text preprocessing is the process of cleaning and preparing text data for analysis. It is a crucial step in any NLP pipeline, as the quality of the preprocessing can have a significant impact on the performance of the model.

This section will cover some of the most common text preprocessing techniques in more detail.

## 1. Noise Removal

Noise is any unwanted information in the text. This can include things like HTML tags, URLs, and special characters.

```python
import re

text = "<p>This is a paragraph with a <a href='https://www.example.com'>link</a>.</p>"
# Remove HTML tags
clean_text = re.sub('<.*?>', '', text)
print(clean_text)
```

**Output:**
```
This is a paragraph with a link.
```

## 2. Normalization

Normalization is the process of converting text to a standard format. This can include things like converting all text to lowercase, removing punctuation, and expanding contractions.

### Lowercasing
```python
text = "NATURAL LANGUAGE PROCESSING"
lowercase_text = text.lower()
print(lowercase_text)
```

**Output:**
```
natural language processing
```

### Punctuation Removal
```python
import string

text = "This is a sentence with punctuation."
clean_text = text.translate(str.maketrans('', '', string.punctuation))
print(clean_text)
```

**Output:**
```
This is a sentence with punctuation
```

### Contraction Expansion
Contractions are shortened forms of words, such as "don't" for "do not". It is often a good idea to expand contractions to their full form.

```python
# You may need to install this library
# pip install contractions
import contractions

text = "I don't know what to do."
expanded_text = contractions.expand(text)
print(expanded_text)
```

**Output:**
```
I do not know what to do.
```

## 3. Tokenization

Tokenization is the process of breaking down text into smaller units, called tokens. This is covered in more detail in Part 2.

## 4. Stopword Removal

Stopword removal is the process of removing common words that do not carry much meaning. This is covered in more detail in Part 2.

## 5. Stemming and Lemmatization

Stemming and lemmatization are two techniques for reducing words to their root form. This is covered in more detail in Part 2.

## 6. Edit Distance (Levenshtein Distance)

Edit distance is a metric used to quantify how dissimilar two strings (e.g., words) are to one another by counting the minimum number of operations required to transform one string into the other. The most common form is the Levenshtein distance.

The allowed operations are:
1.  **Insertion** of a single character.
2.  **Deletion** of a single character.
3.  **Substitution** of a single character.

### Mathematical Definition

For two strings $a$ of length $|a|$ and $b$ of length $|b|$, the Levenshtein distance $lev_{a,b}(i, j)$ is the distance between the first $i$ characters of $a$ and the first $j$ characters of $b$. It is defined recursively:

$$
lev_{a,b}(i, j) =
\begin{cases}
  \max(i, j) & \text{if } \min(i, j) = 0, \\
  \min
  \begin{cases}
    lev_{a,b}(i-1, j) + 1 & \text{(deletion)} \\
    lev_{a,b}(i, j-1) + 1 & \text{(insertion)} \\
    lev_{a,b}(i-1, j-1) + 1_{(a_i \neq b_j)} & \text{(substitution)}
  \end{cases} & \text{otherwise.}
\end{cases}
$$

where $1_{(a_i \neq b_j)}$ is the indicator function equal to 0 when $a_i = b_j$ and equal to 1 otherwise.

### Solved Example

Let's calculate the Levenshtein distance between **"kitten"** and **"sitting"**.

We construct a matrix where the cell $(i, j)$ represents the distance between the first $i$ characters of "kitten" and the first $j$ characters of "sitting".

**Initialization:**
Row 0 and Column 0 are initialized with $0, 1, 2, \dots$ representing transformations from an empty string.

**Matrix Filling:**

| | | **s** | **i** | **t** | **t** | **i** | **n** | **g** |
|---|---|---|---|---|---|---|---|---|
| | **0** | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
| **k** | 1 | **1** | 2 | 3 | 4 | 5 | 6 | 7 |
| **i** | 2 | 2 | **1** | 2 | 3 | 4 | 5 | 6 |
| **t** | 3 | 3 | 2 | **1** | 2 | 3 | 4 | 5 |
| **t** | 4 | 4 | 3 | 2 | **1** | 2 | 3 | 4 |
| **e** | 5 | 5 | 4 | 3 | 2 | **2** | 3 | 4 |
| **n** | 6 | 6 | 5 | 4 | 3 | 3 | **2** | **3** |

**Calculations:**
*   At `k` vs `s` (1,1): min(1+1, 1+1, 0+1) = 1 (substitution 'k'->'s')
*   At `i` vs `i` (2,2): 'i' matches 'i', cost is 0. min(2+1, 2+1, 1+0) = 1
*   ...
*   Bottom-right cell (6,7) is **3**.

**Result:**
The Levenshtein distance is **3**.
1. **k**itten $\rightarrow$ **s**itten (substitute 'k' with 's')
2. sitt**e**n $\rightarrow$ sitt**i**n (substitute 'e' with 'i')
3. sittin $\rightarrow$ sittin**g** (insert 'g')
